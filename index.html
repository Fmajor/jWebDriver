<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>jWebDriver by yaniswang</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">jWebDriver</h1>
      <h2 class="project-tagline">A webdriver client for Node.js</h2>
      <a href="https://github.com/yaniswang/jWebDriver" class="btn">View on GitHub</a>
      <a href="https://github.com/yaniswang/jWebDriver/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/yaniswang/jWebDriver/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="jwebdriver" class="anchor" href="#jwebdriver" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>jWebDriver</h1>

<p><img src="https://raw.github.com/yaniswang/jWebDriver/master/logo.png" alt="jWebDriver logo"></p>

<p>A webdriver client for Node.js</p>

<p><a href="https://travis-ci.org/yaniswang/jWebDriver"><img src="https://img.shields.io/travis/yaniswang/jWebDriver.svg" alt="Build Status"></a>
<a href="https://www.npmjs.com/package/jwebdriver"><img src="https://img.shields.io/npm/v/jwebdriver.svg?style=flat" alt="NPM version"></a>
<a href="https://www.npmjs.com/package/jwebdriver"><img src="https://img.shields.io/npm/l/jwebdriver.svg?style=flat" alt="License"></a>
<a href="https://www.npmjs.com/package/jwebdriver"><img src="https://img.shields.io/npm/dm/jwebdriver.svg?style=flat" alt="NPM count"></a>
<a href="https://www.npmjs.com/package/jwebdriver"><img src="https://img.shields.io/npm/dt/jwebdriver.svg?style=flat" alt="NPM count"></a></p>

<ol>
<li>Official Site: <a href="http://jwebdriver.com/">http://jwebdriver.com/</a>
</li>
<li>API Doc: <a href="http://jwebdriver.com/api/">http://jwebdriver.com/api/</a>
</li>
<li>Coverage: <a href="http://jwebdriver.com/coverage/">http://jwebdriver.com/coverage/</a> (80.46%)</li>
</ol>

<h1>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h1>

<ol>
<li>Support all webdriver protocols: <a href="https://code.google.com/p/selenium/wiki/JsonWireProtocol">https://code.google.com/p/selenium/wiki/JsonWireProtocol</a>
</li>
<li>Easy to use</li>
<li>Support promise chain &amp; generator &amp; es7 await</li>
<li>jQuery style test code, easy use for front engineer</li>
<li>All test cover api</li>
<li>Support hosts mode, different hosts for different job</li>
<li>Support for remote file upload</li>
</ol>

<h1>
<a id="quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Quick start</h1>

<ol>
<li>
<p>Download Selenium server &amp; browser driver.</p>

<blockquote>
<p>Selenium server &amp; IEDriverServer &amp; SafariDriver: <a href="http://selenium-release.storage.googleapis.com/index.html">http://selenium-release.storage.googleapis.com/index.html</a></p>

<p>ChromeDriver: <a href="http://chromedriver.storage.googleapis.com/index.html">http://chromedriver.storage.googleapis.com/index.html</a></p>
</blockquote>
</li>
<li>
<p>Run selenium server</p>

<blockquote>
<p>java -jar selenium-server-standalone-2.26.0.jar</p>
</blockquote>
</li>
<li>
<p>Insall jWebDriver</p>

<blockquote>
<p>npm install jwebdriver</p>
</blockquote>
</li>
<li>
<p>Run test code</p>

<blockquote>
<p>node baidu.js</p>
</blockquote>

<pre><code>var JWebDriver = require('jwebdriver');

var driver = new JWebDriver();
driver.session('chrome', function*(error, chrome){
    yield chrome.url('https://www.baidu.com/');
    var elemement = yield chrome.find('#kw');
    yield elemement.val('mp3').submit();

    console.log(yield chrome.title());

    yield chrome.close();
}).then(function(){
    console.log('all done');
}).catch(function(error){
    console.log(error);
});
</code></pre>

<blockquote>
<p>node mocha.js</p>
</blockquote>

<pre><code>var JWebDriver = require('jwebdriver');
var expect  = require("expect.js");
require('mocha-generators').install();

describe('jWebDriver test', function(){

    var browser;
    before(function*(){
        var driver = new JWebDriver();
        browser = yield driver.session('chrome');
    });

    it('should open url', function*(){
        yield browser.url('https://www.baidu.com/');
        var kw = yield browser.find('#kw');
        expect(kw.length).to.be(1);

        yield kw.val('mp3').submit();

        var url = yield browser.url();
        expect(url).to.contain('wd=mp3');
    });

    after(function*(){
        yield browser.close();
    });

});
</code></pre>

<blockquote>
<p>node promise.js</p>
</blockquote>

<pre><code>var JWebDriver = require('jwebdriver');

var driver = new JWebDriver();
driver.session('chrome', function(error, chrome) {
    chrome.url('https://www.baidu.com/')
          .find('#kw')
          .then(function(kw) {
              return kw.val('mp3')
                       .submit();
          })
          .title()
          .then(function(title) {
              console.log(title);
          })
          .close();
});
</code></pre>
</li>
</ol>

<h1>
<a id="more-examples" class="anchor" href="#more-examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>More examples</h1>

<ol>
<li><a href="https://github.com/yaniswang/jWebDriver/blob/master/example/baidu.js">Baidu test</a></li>
<li><a href="https://github.com/yaniswang/jWebDriver/blob/master/example/google.js">Gooogle test</a></li>
<li><a href="https://github.com/yaniswang/jWebDriver/blob/master/example/mocha.js">Mocha test</a></li>
<li><a href="https://github.com/yaniswang/jWebDriver/blob/master/example/promise.js">Promise test</a></li>
<li><a href="https://github.com/yaniswang/jWebDriver/blob/master/example/upload.js">Upload test</a></li>
<li><a href="https://github.com/yaniswang/jWebDriver/blob/master/example/dragdrop.js">Drag Drop test</a></li>
<li><a href="https://github.com/yaniswang/jWebDriver/blob/master/example/co.js">Co test</a></li>
<li><a href="https://github.com/yaniswang/jWebDriver/blob/master/example/es7async.js">ES7 async</a></li>
</ol>

<h1>
<a id="api-book" class="anchor" href="#api-book" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>API Book</h1>

<p>jWebDriver have 3 Class: Driver, Broswer, Elemenets</p>

<p>All api can used with chain promise and support generator &amp; es7 async:</p>

<pre><code>browser.find('#kw').then(function(elements){
    return elements.val('test')
                   .submit();
})
.title()
.then(function(title){
    console.log(title);
});
</code></pre>

<p>You can search all api here, include all mode of api:</p>

<pre><code>var co = require('co');

co(function*(){

    // ========================== driver api ==========================

    var JWebDriver = require('jwebdriver');

    var driver = new JWebDriver(); // connect to http://127.0.0.1:4444
    var driver = new JWebDriver('127.0.0.1', '4444'); // connect to http://127.0.0.1:4444
    var driver = new JWebDriver({
        'host': '127.0.0.1',
        'port': 4444,
        'logLevel': 0, // 0: no log, 1: warning &amp; error, 2: all log
        'nocolor': false,
        'speed': 100 // default: 0 ms
    });
    var wdInfo = yield driver.info(); // get webdriver server info

    // ========================== session api ==========================

    var arrSessions = yield driver.sessions(); // get all sessions
    for(var i=0;i&lt;arrSessions.length;i++){
        yield arrSessions[i].close();
    }
    // new session
    var browser = yield driver.session('browser', '40.0', 'windows');
    var browser = yield driver.session({
        'browserName':'browser',
        'version': 'ANY',
        'platform': 'ANY'
    });
    // attach session
    var browser = yield driver.session({
        sessionId: 'xxxxxxxxxx'
    });
    // set manual proxy
    var browser = yield driver.session({
        'browserName':'browser',
        'proxy': {
            'proxyType': 'manual',
            'httpProxy': '192.168.1.1:1080',
            'sslProxy': '192.168.1.1:1080'
        }
    });
    // set pac proxy
    var browser = yield driver.session({
        'browserName':'browser',
        'proxy': {
            'proxyType': 'pac',
            'proxyAutoconfigUrl': 'http://x.x.x.x/test.pac'
        }
    });
    // set hosts
    var browser = yield driver.session({
        'browserName':'browser',
        'hosts': '192.168.1.1 www.alibaba.com\r\n192.168.1.1 www.google.com'
    });
    // attach session
    var browser = yield driver.session('xxxxxxxxxx'); // session id

    // get session info
    var capabilities = yield browser.info(); // get capabilities
    var isSupported = yield browser.support('javascript'); // get capability supported: javascript, cssselector, screenshot, storage, alert, database, rotatable
    yield browser.config({
        pageloadTimeout: 5000, // page onload timeout
        scriptTimeout: 1000, // sync script timeout
        asyncScriptTimeout: 1000, // async script timeout
        implicitTimeout: 1000 // implicit timeout
    });
    yield browser.close(); // close session
    yield browser.sleep(1000); // sleep

    // ========================== window ==========================

    var curWindowHandle = yield browser.windowHandle(); // get current window handle
    var arrWindowHandles = yield browser.windowHandles(); // get all windows
    yield browser.switchWindow('handleid'); // focus to window
    yield browser.switchWindow(0); // focus to first window
    yield browser.switchWindow(1); // focus to second window
    var newWindowHandle = yield browser.newWindow('http://www.alibaba.com/', 'testwindow', 'width=200,height=200'); // open new window and return windowHandle
    yield browser.closeWindow(); // close current window

    // ========================== frame ==========================

    var elements = yield browser.frames(); // get all frames
    yield browser.switchFrame(0); // focus to frame 0
    yield browser.switchFrame(1); // focus to frame 1
    yield browser.switchFrame('#iframe_id'); // focus to frame #iframe_id
    yield browser.switchFrame(null); // focus to main page
    yield browser.switchFrameParent(); // focus to parent context

    // ========================== position &amp; size &amp; maximize &amp; screenshot ==========================

    var offset = yield browser.offset(); // return {x: 1, y: 1}
    yield browser.offset(10, 10); // set offset
    yield browser.offset({
        x: 10,
        y: 10
    });
    var info = yield browser.size(); // return {width: 100, height: 100}
    yield browser.size(100, 100); // set size
    yield browser.size({
        width: 100,
        height: 100
    });
    yield browser.maximize();
    var png_base64  = yield browser.getScreenshot();// get the screen shot, base64 type

    // ========================== url &amp; title &amp; html ==========================

    yield browser.url('http://www.alibaba.com/'); // goto url
    var url = yield browser.url(); // get url
    var title = yield browser.title(); // get title
    var html = yield browser.html(); // get html code

    // ========================== navigator ==========================

    yield browser.refresh(); // refresh page
    yield browser.back(); // back to previous page
    yield browser.forward(); // forward to next page

    yield browser.scrollTo('#id'); // scroll to element (first element)
    yield browser.scrollTo('#id', 10, 10); // scroll to element (first element)
    yield browser.scrollTo('#id', { // scroll to element (first element)
        x: 10,
        y: 10
    });
    yield browser.scrollTo(10, 10);
    yield browser.scrollTo({
        x: 10,
        y: 10
    });

    // ========================== cookie ==========================

    var value = yield browser.cookie('test'); // get cookie
    yield browser.cookie('test', '123'); // set cookie
    yield browser.cookie('test', '123', { // https://code.google.com/p/selenium/wiki/JsonWireProtocol#Cookie_JSON_Object
        path: '',
        domain: '',
        secure: '',
        httpOnly: '',
        expiry: ''
    });
    yield browser.cookie('test',123, {
        expiry: '7 day' // second|minute|hour|day|month|year
    });
    yield browser.removeCookie('test'); // delete cookie
    var mapCookies = yield browser.cookies(); // get all cookie
    yield browser.clearCookies(); // delete all cookies

    // ========================== local storage &amp;&amp; session storage ==========================

    var arrKeys = yield browser.localStorageKeys(); // get all local storage keys
    var value = yield browser.localStorage('test'); // get local storage value
    yield browser.localStorage('test', '1'); // set local storage value
    yield browser.removeLocalStorage('test'); // delete local storage
    yield browser.clearLocalStorages(); // clear all local sotrage

    var arrKeys = yield browser.sessionStorageKeys(); // get all session storage keys
    var value = yield browser.sessionStorage('test'); // get session storage value
    yield browser.sessionStorage('test', '1'); // set session storage value
    yield browser.removeSessionStorage('test'); // delete session storage
    yield browser.clearSessionStorages(); // clear all session sotrage

    // ========================== alert, confirm, prompt ==========================

    var msg = yield browser.getAlert();// get alert text
    if(msg !== null){
        yield browser.setAlert('test');// set msg to prompt
        yield browser.acceptAlert(); // accept alert
        yield browser.dismissAlert(); // dismiss alert
    }

    // ========================== mouse ==========================

    var MouseButtons = browser.MouseButtons;
    yield browser.mouseMove(element); // move to center of element
    yield browser.mouseMove('#id'); // move to center of element
    yield browser.mouseMove('#id', 10, 10); // move to offset of the element
    yield browser.mouseMove('#id', {x: 10, y: 10}); // move to offset of the element
    yield browser.mouseDown(); // left mouse button down
    yield browser.mouseDown(MouseButtons.RIGHT); // right mouse button down
    yield browser.mouseDown('RIGHT'); // right mouse button down
    yield browser.mouseUp(); // left mouse button up
    yield browser.mouseUp(MouseButtons.RIGHT); // right mouse button up
    yield browser.mouseUp('RIGHT'); // right mouse button up
    yield browser.click();
    yield browser.click(MouseButtons.RIGHT);
    yield browser.click('RIGHT');
    yield browser.dblClick();
    yield browser.dragDrop('#a', '#b'); // drag a drop to b
    yield browser.dragDrop({
        selector: '#a',
        x: 1,
        y: 1
    }, {
        selector: '#b',
        x: 2,
        y: 2
    });

    // ========================== keyboard ==========================

    yield browser.sendKeys('abc');
    var Keys = browser.Keys;
    yield browser.keyDown(Keys.CTRL);
    yield browser.keyDown('CTRL');
    yield browser.sendKeys('a'+Keys.LEFT);
    yield browser.keyUp(Keys.CTRL);
    yield browser.keyUp('CTRL');
    yield browser.sendKeys('{CTRL}a{CTRL}');

    // ========================== eval ==========================

    // sync eval
    var title = yield browser.eval(function(){
        return document.title;
    });
    var value = yield browser.eval(function(arg1, arg2){
        return arg1;
    }, 1, 2);
    var value = yield browser.eval(function(arg1, arg2){
        return arg1;
    }, [1, 2]);
    // async eval
    var value = yield browser.eval(function(arg1, arg2, done){
        setTimeout(function(){
            done(arg2);
        }, 2000);
    }, 1, 2);
    // pass element to eval
    var tagName = yield browser.eval(function(element){
        return element.tagName;
    }, yield browser.find('#id'));

    // ========================== element ==========================

    var elements = yield browser.wait('#id');// wait for element
    if(elements.length === 1){
        console.log('#id displayed');
    }
    yield elements.sleep(300); // sleep ms
    var elements = yield browser.wait('#id', 5000);// wait for element, 5000 ms timeout
    var elements = yield browser.wait('#id', {
        timeout: 10000, // set timeout, default: 10000
        displayed: true, // wait for element displayed, default: true
        removed: false // wait for element removed, default: false
    });

    var elements = yield browser.find('#id'); // find element
    var elements = yield browser.find('active');// get active element
    var elements = yield browser.find('#id');// get element by css selector
    var elements = yield browser.find('//html/body');// get element by xpath
    var elements = yield elements.find('.class'); // find all child element
    var isEqual = yield elements.equal('#bbb a'); // test if two elements refer to the same DOM element.

    var len = elements.length;
    for(var i=0;i&lt;len;i++){
        element = elements.get(i);
    }

    var tagName = yield element.tagName(); // get tagname (first element)
    var value = element.val(); // equal to element.attr('value');
    yield element.val('mp3'); // equal to: element.clear().sendKeys('mp3');
    var value = yield element.attr('id'); // get attr value (first element)
    var value = yield element.css('border'); // get css value (first element)
    yield element.clear(); // clear input &amp; textarea value
    var text = yield element.text(); // get displayed text (first element)

    var offset = yield element.offset(); // get offset from left top corner of the page (first element)
    var offset = yield element.offset(true); // get offset from left top corner of the screen (first element)
    var size = yield element.size(); // return {width: 100, height: 100} (first element)
    var isDisplayed = yield element.displayed(); // determine if an element is currently displayed (first element)
    var isEnabled = yield element.enabled(); //is element enabled (first element)
    var isSelected = yield element.selected(); // is element selected (first element)

    // select option
    yield element.select(0); // select index
    yield element.select('book'); // select value
    yield element.select({
        type: 'value', // index | value | text
        value: 'book'
    });

    yield element.sendKeys('abc'); // send keys to element
    var Keys = browser.Keys;
    yield element.sendKeys('a'+Keys.LEFT);
    yield element.sendKeys('{CTRL}a{CTRL}');

    yield element.click(); // click element
    yield element.dblClick(); // dblClick element
    yield element.dragDropTo('#id'); // dragDrop to element (first element)
    yield element.dragDropTo('#id', 10, 10); // dragDrop to element (first element)
    yield element.dragDropTo({
        selector: '#id',
        x: 10,
        y: 10
    }); // dragDrop to element (first element)

    yield fileElement.uploadFile('c:/test.jpg');// upload file to browser machine and set temp path to &lt;input type="file"&gt;
    yield element.submit();// submit form

    // ========================== mobile api ==========================
    // touch down, touch move, touch up
    yield browser.touchDown(10, 10);
    yield browser.touchDown({
        x: 10, // X coordinate on the screen.
        y: 10  // Y coordinate on the screen.
    });
    yield browser.touchMove(10, 10);
    yield browser.touchMove({
        x: 10, // X coordinate on the screen.
        y: 10  // Y coordinate on the screen.
    });
    yield browser.touchUp(10, 10);
    yield browser.touchUp({
        x: 10, // X coordinate on the screen.
        y: 10  // Y coordinate on the screen.
    });
    // scroll
    yield browser.touchScroll(10, 10); // Use this command if you don't care where the scroll starts on the screen
    yield browser.touchScroll({
        x: 10, // The x offset in pixels to scrollby.
        y: 10  // The y offset in pixels to scrollby.
    });
    // flick
    yield browser.touchFlick({ // Use this flick command if you don't care where the flick starts on the screen.
        xspeed: 5, // The x speed in pixels per second.
        yspeed: 0  // The y speed in pixels per second.
    });

    // element api
    var element = yield browser.find('#id');
    yield element.touchClick();
    yield element.touchDblClick();
    yield element.touchLongClick();
    yield element.touchScroll(10, 10);
    yield element.touchScroll({
        x: 10, // The x offset in pixels to scroll by.
        y: 10  // The y offset in pixels to scroll by.
    });
    yield element.touchFlick(10, 10, 5); // flick to x: 10, y: 10 with speed 5
    yield element.touchFlick({
        x: 10, // The x offset in pixels to flick by.
        y: 10, // The y offset in pixels to flick by.
        speed: 5 // The speed in pixels per seconds
    });

    var orientation = yield browser.orientation(); // return LANDSCAPE|PORTRAIT
    yield browser.orientation('LANDSCAPE'); // set orientation: LANDSCAPE|PORTRAIT

    // ========================== geo location ==========================

    var loc = yield browser.geolocation(); // return {latitude: number, longitude: number, altitude: number}
    yield browser.geolocation(1, 1, 1); // set location
    yield browser.geolocation({
        latitude: 1,
        longitude: 1,
        altitude: 1
    });

}).then(function(){
    console.log('All done!')
}).catch(function(error){
    console.log(error);
});
</code></pre>

<h1>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>License</h1>

<p>jWebDriver is released under the MIT license:</p>

<blockquote>
<p>The MIT License</p>

<p>Copyright (c) 2014-2015 Yanis Wang &lt;<a href="mailto:yanis.wang@gmail.com">yanis.wang@gmail.com</a>&gt;</p>

<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>

<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</blockquote>

<h1>
<a id="thanks" class="anchor" href="#thanks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Thanks</h1>

<ul>
<li>Selenium: <a href="http://code.google.com/p/selenium/">http://code.google.com/p/selenium/</a>
</li>
<li>xtend: <a href="https://npmjs.org/package/xtend">https://npmjs.org/package/xtend</a>
</li>
<li>mocha: <a href="https://npmjs.org/package/mocha">https://npmjs.org/package/mocha</a>
</li>
<li>expect.js: <a href="https://github.com/LearnBoost/expect.js">https://github.com/LearnBoost/expect.js</a>
</li>
<li>istanbul: <a href="https://github.com/gotwarlost/istanbul">https://github.com/gotwarlost/istanbul</a>
</li>
<li>Grunt: <a href="http://gruntjs.com/">http://gruntjs.com/</a>
</li>
<li>JSHint: <a href="https://github.com/jshint/jshint">https://github.com/jshint/jshint</a>
</li>
<li>node-zip: <a href="https://github.com/daraosn/node-zip">https://github.com/daraosn/node-zip</a>
</li>
<li>Express: <a href="https://github.com/strongloop/express">https://github.com/strongloop/express</a>
</li>
<li>request: <a href="https://github.com/request/request">https://github.com/request/request</a>
</li>
<li>co: <a href="https://github.com/tj/co">https://github.com/tj/co</a>
</li>
<li>PhantomJs: <a href="https://github.com/Medium/phantomjs">https://github.com/Medium/phantomjs</a>
</li>
<li>GitHub: <a href="https://github.com/">https://github.com/</a>
</li>
</ul>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/yaniswang/jWebDriver">jWebDriver</a> is maintained by <a href="https://github.com/yaniswang">yaniswang</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
